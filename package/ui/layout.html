<!DOCTYPE html>
<html lang="en" class="synoedit">
    <head>
        <meta charset="utf-8">
        <title>{{.Title}}</title>
        <link rel="stylesheet" type="text/css" href="/webman/3rdparty/synoedit/css/style.css">
        <!-- <script src="/webman/dsmtoken.cgi"></script> -->
    </head>
    <body>
        <div class="message">
            <p class="messageText error">{{.ErrorMessage}}</p>
        </div>
        <div class="spinner">
            <div class="centerBox">
                <span class="animation">
                    <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
                        <rect x="0" y="0" width="40" height="40" fill="#C8D2DD" shape-rendering="crispEdges">
                            <animate attributeName="fill" values="#2A5790;#C8D2DD;#C8D2DD" keyTimes="0;0.25;1" dur="0.8s" repeatCount="indefinite" begin="0s" calcMode="discrete"></animate>
                        </rect>
                        <rect x="50" y="0" width="40" height="40" fill="#C8D2DD" shape-rendering="crispEdges">
                            <animate attributeName="fill" values="#2A5790;#C8D2DD;#C8D2DD" keyTimes="0;0.25;1" dur="0.8s" repeatCount="indefinite" begin="0.2s" calcMode="discrete"></animate>
                        </rect>
                        <rect x="0" y="50" width="40" height="40" fill="#C8D2DD" shape-rendering="crispEdges">
                            <animate attributeName="fill" values="#2A5790;#C8D2DD;#C8D2DD" keyTimes="0;0.25;1" dur="0.8s" repeatCount="indefinite" begin="0.6s" calcMode="discrete"></animate>
                        </rect>
                        <rect x="50" y="50" width="40" height="40" fill="#C8D2DD" shape-rendering="crispEdges">
                            <animate attributeName="fill" values="#2A5790;#C8D2DD;#C8D2DD" keyTimes="0;0.25;1" dur="0.8s" repeatCount="indefinite" begin="0.4s" calcMode="discrete"></animate>
                        </rect>
                    </svg>
                </span>
                <p>Processing. Please wait...</p>
            </div>
        </div>
        <form method="get" class="appSelector">
            <span class="appSelect">
                <select name="app">
                    <option value="" selected disabled></option>
                    {{- $CurrentApp := .CurrentApp -}}
                    {{- range $AppName, $Application := .Applications -}}
                        {{- if eq $CurrentApp $AppName }}
                    <option value="{{ $AppName }}">{{ $AppName }}</option>
                        {{- else }}
                    <option value="{{ $AppName }}">{{ $AppName }}</option>
                        {{- end -}}
                    {{- end }}
                </select>
            </span>
        </form>
        <form method="get" class="fileSelector">
            <span class="fileSelect">
                <select name="file">
                    <option value="" selected></option>
                </select>
            </span>
        </form>
        <form method="post" class="action">
            <input class="btn" type="submit" name="action" disabled value="Custom Action">
        </form>
        <form method="post" class="fileEditor">
            <div class="fileContent">
                <textarea name="fileContent" autocomplete="off" autofocus>{{.FileData}}</textarea>
            </div>
            <input class="btn primary" type="submit" value="Save">
        </form>
        <link rel="stylesheet" href="/webman/3rdparty/synoedit/codemirror/lib/codemirror.css">
        <!-- <link rel="stylesheet" href="/webman/3rdparty/synoedit/codemirror/theme/monokai.css"> -->
        <link rel="stylesheet" href="/webman/3rdparty/synoedit/codemirror/addon/dialog/dialog.css">
        <script>
            // FIXME: if this data becomes big enough get this data via ajax
            var configFiles = {{ .Applications }}
            var dev = {{ .DevEnvironment }}
            // configFiles = JSON.parse(configFiles)

            // Ext.Ajax.Request({ ... }) // add SynoToken at event 'beforerequest'
            // Ext.data.Connection({ ... }) // add SynoToken at event 'beforerequet'
            // new Ext.form.basicForm({ ... }) // add SynoToken at event 'beforeaction'
            // // Ext.urlAppend will add SynoToken internally
            // url = Ext.urlAppend('http://192.168.1.1', Ext.urlEncode({ ... }));
        </script>
        <script src="/webman/3rdparty/synoedit/codemirror/lib/codemirror.js"></script>

        <script src="/webman/3rdparty/synoedit/codemirror/addon/dialog/dialog.js"></script>
        <script src="/webman/3rdparty/synoedit/codemirror/addon/search/jump-to-line.js"></script>
        <script src="/webman/3rdparty/synoedit/codemirror/addon/search/searchcursor.js"></script>
        <script src="/webman/3rdparty/synoedit/codemirror/addon/search/search.js"></script>

        <script src="/webman/3rdparty/synoedit/codemirror/addon/comment/comment.js"></script>

        <script src="/webman/3rdparty/synoedit/codemirror/addon/fold/xml-fold.js"></script>
        <script src="/webman/3rdparty/synoedit/codemirror/addon/edit/matchtags.js"></script>
        <script src="/webman/3rdparty/synoedit/codemirror/addon/edit/closebrackets.js"></script>
        <script src="/webman/3rdparty/synoedit/codemirror/addon/edit/matchbrackets.js"></script>

        <script src="/webman/3rdparty/synoedit/codemirror/addon/mode/loadmode.js"></script>
        <script src="/webman/3rdparty/synoedit/codemirror/mode/meta.js"></script>

        <script src="/webman/3rdparty/synoedit/codemirror/keymap/sublime.js"></script>

        <script src="/webman/3rdparty/synoedit/js/main.js"></script>
    </body>
</html>
